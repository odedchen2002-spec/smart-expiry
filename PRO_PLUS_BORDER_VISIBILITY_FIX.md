# תיקון: מסגרת Pro+ לא הייתה נראית

## 🐛 הבעיה

> "יש בעיה שאם אני לוחץ על הבלוק של פרו פלוס, הצבע מסגרת שלו לא מופיע"

כשלוחצים על כרטיס Pro+, המסגרת הסגולה **לא הייתה נראית**.

### למה זה קרה?

ה-`planCard` style היה מוגדר עם:
```typescript
planCard: {
  borderRadius: 16,
  backgroundColor: '#FFFFFF',
  overflow: 'visible',  // ❌ גורם ל-badge לכסות את המסגרת!
},
```

הבעיה:
1. ✅ כש-`selectedPlan === 'pro_plus'`, הקוד **מוסיף** `borderWidth: 2` ו-`borderColor: '#6d28d9'`
2. ❌ אבל ה-`bestValueBadge` יושב **מעל** המסגרת (`position: 'absolute', top: 0`)
3. ❌ בגלל `overflow: 'visible'`, ה-badge **מכסה** את המסגרת העליונה

```
┌═════════════════════════┐ ← מסגרת סגולה (קיימת אבל מכוסה!)
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  ← bestValueBadge מכסה!
║  [הכי פופולרי]  ⭐     ║
║   👑  Pro+              ║
║   ₪59 / לחודש          ║
╚═════════════════════════╝
```

## ✅ הפתרון

שינוי `overflow` מ-`'visible'` ל-`'hidden'`:

```typescript
planCard: {
  borderRadius: 16,
  backgroundColor: '#FFFFFF',
  overflow: 'hidden',  // ✅ כעת המסגרת נראית!
},
```

### למה זה עובד?

עם `overflow: 'hidden'`:
1. ✅ המסגרת מוצגת **סביב** הכרטיס
2. ✅ ה-`bestValueBadge` **בתוך** הכרטיס ולא מכסה את המסגרת
3. ✅ כל אלמנט שיוצא מגבולות הכרטיס נחתך

```
┌═════════════════════════┐ ← מסגרת סגולה נראית!
║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓║  ← badge בתוך המסגרת
║ [הכי פופולרי]  ⭐      ║
║   👑  Pro+              ║
║   ₪59 / לחודש          ║
╚═════════════════════════╝
```

## 🎨 איך זה נראה עכשיו

### כשלוחצים על Pro:
```
┌═════════════════════════┐
║      [מומלץ]            ║ ← מסגרת כחולה ✅
║   📦  Pro               ║
║   ₪29 / לחודש          ║
╚═════════════════════════╝

┌─────────────────────────┐
│▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓│ ← badge בלי מסגרת ✅
│ [הכי פופולרי]  ⭐      │
│   👑  Pro+              │
│   ₪59 / לחודש          │
└─────────────────────────┘
```

### כשלוחצים על Pro+:
```
┌─────────────────────────┐
│      [מומלץ]            │ ← אין מסגרת ✅
│   📦  Pro               │
│   ₪29 / לחודש          │
└─────────────────────────┘

┌═════════════════════════┐
║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓║ ← מסגרת סגולה נראית! ✅
║ [הכי פופולרי]  ⭐      ║
║   👑  Pro+              ║
║   ₪59 / לחודש          ║
╚═════════════════════════╝
```

## 🔧 השינוי הטכני

### קובץ: `app/(paywall)/subscribe.tsx`

**שורות ~666-670:**

```diff
  planCard: {
    borderRadius: 16,
    backgroundColor: '#FFFFFF',
-   overflow: 'visible',
+   overflow: 'hidden',  // Ensure badge doesn't cover border
  },
```

## 🎯 למה `overflow: 'hidden'`?

### לפני (`overflow: 'visible'`):
- ✅ Shadow נראה מחוץ לכרטיס
- ❌ Badge יכול לכסות את המסגרת
- ❌ אלמנטים יכולים לצאת מגבולות הכרטיס

### אחרי (`overflow: 'hidden'`):
- ✅ Shadow עדיין נראה (הוא outside של Card component)
- ✅ Badge **לא** מכסה את המסגרת
- ✅ כל התוכן נשאר בתוך גבולות הכרטיס
- ✅ המסגרת **נראית** סביב הכרטיס

### האם Shadow נפגע?

**לא!** ה-Shadow מוגדר על ה-`Card` component עצמו, לא בתוך התוכן:
```typescript
proCard: {
  ...Platform.select({
    ios: {
      shadowColor: '#007AFF',      // ← זה על ה-Card, לא בתוכו
      shadowOffset: { width: 0, height: 4 },
      shadowOpacity: 0.15,
      shadowRadius: 12,
    },
  }),
},
```

לכן `overflow: 'hidden'` על התוכן של הכרטיס **לא משפיע** על ה-shadow!

## 🧪 בדיקות מומלצות

### 1. בחירת Pro+:
1. פתח מסך "נהל מנוי"
2. לחץ על **Pro+**
3. ✅ צריך לראות **מסגרת סגולה** סביב הכרטיס
4. ✅ ה-badge "הכי פופולרי" צריך להיות **בתוך** הכרטיס
5. ✅ המסגרת צריכה להיות **נראית** בכל הצדדים (למעלה, למטה, ימין, שמאל)

### 2. בחירת Pro:
1. לחץ על **Pro**
2. ✅ Pro צריך לקבל מסגרת כחולה
3. ✅ ה-badge "מומלץ" צריך להיות בפינה
4. ✅ המסגרת צריכה להיות נראית

### 3. החלפה מהירה:
1. לחץ על Pro → ✅ מסגרת כחולה
2. לחץ על Pro+ → ✅ מסגרת סגולה
3. חזור על זה מספר פעמים
4. ✅ צריך לעבוד חלק, מסגרות תמיד נראות

### 4. Shadow עדיין עובד:
1. בדוק שכל הכרטיסים יש להם shadow
2. ✅ Pro - shadow כחול
3. ✅ Pro+ - shadow סגול
4. ✅ Free - shadow אפור

## 📊 השוואה ויזואלית

### לפני התיקון:
```
Pro Card:
┌═════════════════════════┐
║      [מומלץ]            ║ ← מסגרת כחולה נראית ✅
║   📦  Pro               ║
╚═════════════════════════╝

Pro+ Card:
┌═════════════════════════┐ ← מסגרת לא נראית ❌
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  ← badge מכסה
║ [הכי פופולרי]  ⭐      ║
║   👑  Pro+              ║
╚═════════════════════════╝
```

### אחרי התיקון:
```
Pro Card:
┌═════════════════════════┐
║      [מומלץ]            ║ ← מסגרת כחולה נראית ✅
║   📦  Pro               ║
╚═════════════════════════╝

Pro+ Card:
┌═════════════════════════┐ ← מסגרת נראית! ✅
║▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓║  ← badge בתוך
║ [הכי פופולרי]  ⭐      ║
║   👑  Pro+              ║
╚═════════════════════════╝
```

## 🎓 למה זה הגיוני?

### CSS `overflow` Behavior:

| Value | Description |
|-------|-------------|
| `visible` | Content can overflow outside the element ❌ |
| `hidden` | Content is clipped to element's bounds ✅ |

### במקרה שלנו:

- **`overflow: 'visible'`:**
  - Badge position: `absolute, top: 0`
  - Border: נמצא **על** הכרטיס
  - **תוצאה:** Badge מכסה את ה-border 😢

- **`overflow: 'hidden'`:**
  - Badge position: `absolute, top: 0`
  - Border: נמצא **סביב** הכרטיס
  - **תוצאה:** Badge **בתוך** הכרטיס, border נראה 😊

## ✅ סיכום

התיקון פותר את בעיית המסגרת החסרה:
- ✅ **מסגרת Pro+ כעת נראית** כשהכרטיס נבחר
- ✅ **Badge לא מכסה** את המסגרת
- ✅ **עקבי** - שני הכרטיסים מתנהגים אותו דבר
- ✅ **Shadow עדיין עובד** (לא נפגע)
- ✅ **Visual feedback ברור** על כל לחיצה

**תוצאה: עכשיו גם Pro וגם Pro+ מראים מסגרת צבעונית כשנבחרים!** 🚀

---

**תאריך:** 17/01/2026  
**תיקון:** Fixed Pro+ border visibility with overflow hidden  
**קובץ:** `app/(paywall)/subscribe.tsx`  
**שורה:** 669
